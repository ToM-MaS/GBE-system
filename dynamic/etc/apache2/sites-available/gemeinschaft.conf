<IfModule mpm_prefork_module>
   StartServers          2
   MinSpareServers       1
   MaxSpareServers       4
   MaxClients           50
   MaxRequestsPerChild   0
</IfModule>


HostnameLookups Off
KeepAlive On
MaxKeepAliveRequests 40
KeepAliveTimeout 60
Timeout 100

<VirtualHost *:80>
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
	LogLevel error

	DocumentRoot /opt/gemeinschaft/public

	PassengerEnabled on
	PassengerAppRoot /opt/gemeinschaft
	PassengerMinInstances 1
	PassengerStatThrottleRate 10
	PassengerSpawnMethod smart-lv2
	PassengerUseGlobalQueue on
	PassengerUser  gs5
	PassengerGroup gemeinschaft

	RailsBaseURI /
	RailsEnv development

	<Directory /opt/gemeinschaft/public>
		AllowOverride all
		Options -MultiViews
		Options FollowSymLinks
	</Directory>
</VirtualHost>


<VirtualHost *:443>
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
	LogLevel error

	DocumentRoot /opt/gemeinschaft/public

	PassengerEnabled on
	PassengerAppRoot /opt/gemeinschaft
	PassengerMinInstances 1
	PassengerStatThrottleRate 10
	PassengerSpawnMethod smart-lv2
	PassengerUseGlobalQueue on
	PassengerUser  gs5
	PassengerGroup gemeinschaft

	RailsBaseURI /
	RailsEnv development

	<Directory /opt/gemeinschaft/public>
		AllowOverride all
		Options -MultiViews
		Options FollowSymLinks
	</Directory>

	SSLEngine on
	SSLCertificateFile    /etc/ssl/gemeinschaft.crt
	SSLCertificateKeyFile /etc/ssl/gemeinschaft.key
</VirtualHost>

PassengerPreStart http://127.0.0.1:80/
PassengerPreStart https://127.0.0.1:443/
